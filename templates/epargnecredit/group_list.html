{% extends 'base.html' %}

{% block title %}Mes groupes{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="fw-bold text-success">ğŸ“‹ Mes groupes</h1>
  <a href="{% url 'epargnecredit:ajouter_groupe' %}" class="btn btn-success">â• CrÃ©er un groupe</a>
</div>

{% if groupes %}
  <div class="list-group shadow-sm">
    {% for g in groupes %}
      {% if g.is_remboursement %}
        {% url 'epargnecredit:group_detail_remboursement' g.id as detail_url %}
      {% else %}
        {% url 'epargnecredit:group_detail' g.id as detail_url %}
      {% endif %}

      <a href="{{ detail_url }}" class="list-group-item list-group-item-action">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h5 class="mb-1 fw-semibold">
              {{ g.nom }}
              {% if g.is_remboursement %}
                <span class="badge bg-warning text-dark ms-2">Remboursement</span>
              {% else %}
                <span class="badge bg-success ms-2">Principal</span>
              {% endif %}
            </h5>
            <small class="text-muted">
              CrÃ©Ã© le {{ g.date_creation|date:"d/m/Y" }}
              {% if g.is_remboursement and g.parent_group %}
                â€¢ Parent : <strong>{{ g.parent_group.nom }}</strong>
              {% endif %}
            </small>
          </div>
          <span class="badge bg-outline-secondary text-muted">#{{ g.id }}</span>
        </div>
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info mt-3">
    {% if request.user.is_super_admin %}
      Aucun groupe trouvÃ© pour le moment.
    {% else %}
      Vous n'avez encore crÃ©Ã© aucun groupe. Commencez par en crÃ©er un !
    {% endif %}
  </div>
{% endif %}
{% endblock %}


