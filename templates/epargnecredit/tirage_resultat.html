{% extends 'base.html' %}
{% load humanize %}

{% block title %}ğŸ² Tirage au sort{% endblock %}

{% block content %}
<div class="container mt-5 text-center" style="max-width: 600px;">
    <h1 class="mb-4 text-primary fw-bold">ğŸ² Tirage au sort</h1>

    <h4 class="mb-3">
        Groupe : <span class="text-success fw-semibold">{{ group.nom }}</span>
    </h4>

    {% if erreur %}
      <div class="alert alert-danger" role="alert">
        âš ï¸ {{ erreur }}
      </div>
    {% endif %}

    {% if tirage_possible %}
      <a href="{% url 'epargnecredit:lancer_tirage' group.id %}"
         class="btn btn-primary btn-lg mb-3">
         ğŸ² Lancer le tirage au sort
      </a>
    {% else %}
      <a href="#"
         class="btn btn-primary btn-lg disabled mb-3"
         tabindex="-1"
         aria-disabled="true">
         ğŸ² tirage au sort bien lancÃ©
      </a>
    {% endif %}

    {% if gagnant %}
        <div class="mt-5">
            <h2 class="text-success">ğŸ‘ FÃ©licitations Ã  ğŸ‰</h2>
            <h1 class="display-4 fw-bold text-dark">
                {{ gagnant.user.nom }}
            </h1>
            <p class="fs-4 mt-3">
                Il/Elle a gagnÃ© :
                <strong class="text-danger">
                    {{ montant_total|floatformat:0|intcomma }} FCFA
                </strong>
            </p>
            <!-- Bouton Payer le gagnant -->
            <a href="{% url 'epargnecredit:payer_gagnant' group.id %}" class="btn btn-warning btn-lg mt-4">
                ğŸ’¸ Payer le gagnant maintenant
            </a>
        </div>
    {% else %}
        <div class="alert alert-warning mt-5" role="alert">
            Aucun membre Ã©ligible au tirage pour le moment.
        </div>
    {% endif %}

    <a href="{% url 'epargnecredit:dashboard_epargne_credit' %}" class="btn btn-outline-primary mt-4 px-4">
        â¬… Retour au tableau de bord
    </a>
</div>
{% endblock %}
